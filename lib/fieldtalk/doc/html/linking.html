<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
<title>FieldTalk Modbus Master C++ Library: Linking your Applications against the Library</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<style>
h2 a, h3 a {font-weight:bold; color:black;}
h2 a:hover, h3 a:hover {text-decoration:none;}
</style>
</head><body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Introduction</span></a></li>
      <li class="current"><a href="pages.html"><span>Chapters</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Linking your Applications against the Library </h1>  </div>
</div>
<div class="contents">
<h2><a class="anchor" id="unix_link"></a>
Linux, UNIX and QNX Systems: Compiling and Linking Applications</h2>
<p>Let's assume the following project directory structure:</p>
<div class="fragment"><pre class="fragment">        myprj
        |
        +-- fieldtalk
           |
           +-- doc
           +-- samples
           +-- src
           +-- include
           +-+ lib
             |
             +-- linux     (exact name depends on your platform)
</pre></div><p>Add the library's include directory to the compiler's include path.</p>
<p>Example: </p>
<div class="fragment"><pre class="fragment">c++ -Ifieldtalk/include -c myapp.cpp
</pre></div><p>Add the file name of the library to the file list passed to the linker.</p>
<p>Example: </p>
<div class="fragment"><pre class="fragment">c++ -o myapp myapp.o fieldtalk/lib/linux/libmbusmaster.a
</pre></div><h2><a class="anchor" id="win_link"></a>
Windows Systems: Compiling and Linking Applications</h2>
<p>Let's assume the following project directory structure:</p>
<div class="fragment"><pre class="fragment">        myprj
        |
        +-- fieldtalk
           |
           +-- doc
           +-- samples
           +-- src
           +-- include
           +-+ lib
             |
             +-- win
                 |
                 +-- win32
                     |
                     +-- release
</pre></div><p>Add the library's include directory to the compiler's include path.</p>
<p>Visual C++ Example: </p>
<div class="fragment"><pre class="fragment">cl -Ifieldtalk/include -c myapp.cpp
</pre></div><p> Borland C++ Example: </p>
<div class="fragment"><pre class="fragment">bcc32 -Ifieldtalk/include -c myapp.cpp
</pre></div><p>Add the file name of the library to the file list passed to the linker. Visual C++ only: If you are using the Modbus/TCP protocol you have to add the Winsock2 library Ws2_32.lib.</p>
<p>Visual C++ Example:</p>
<div class="fragment"><pre class="fragment">cl -Fe myapp myapp.obj
   fieldtalk/lib/win/win32/release/libmbusmaster.lib Ws2_32.lib
</pre></div><h2><a class="anchor" id="unix_install"></a>
Linux, UNIX and QNX Systems: Unpacking and Compiling the Source</h2>
<p>1. Download and save the zipped tarball into your project directory.</p>
<p>2. Uncompress the zipped tarball using gzip:</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor"># gunzip FT-MBMP-??-ALL.2.6.0.tar.gz</span>
</pre></div><p>3. Untar the tarball</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor"># tar xf FT-MBMP-??-ALL.2.6.0.tar</span>
</pre></div><p>The tarball will create the following directory structure in your project directory:</p>
<div class="fragment"><pre class="fragment">             myprj
               |
               +-- fieldtalk
                   |
                   +-- doc
                   +-- include
                   +-- src
                   +-- samples
</pre></div><p>4. Compile the library from the source code. Enter the FieldTalk src directory and call the make script:</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor"># cd fieldtalk/src</span>
<span class="preprocessor"># ./make</span>
</pre></div><p>The make shell script tries to detect your platform and executes the compiler and linker commands.</p>
<p>The compiler and linker configuration is contained in the file src/platform.</p>
<p>To cross-compile for ucLinux or arm-linux pass uclinux or arm-linux as a parameter to the the make script:</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor"># ./make arm-linux</span>
</pre></div><p>5. The library will be compiled into one of the following platform specfic sub-directories:</p>
<table class="doxtable">
<tr>
<th><b>Platform</b> </th><th><b>Library Directory</b> </th></tr>
<tr>
<td>Linux </td><td>lib/linux </td></tr>
<tr>
<td>QNX 6 </td><td>lib/qnx6 </td></tr>
<tr>
<td>QNX 4 </td><td>lib/qnx4 </td></tr>
<tr>
<td>Irix </td><td>lib/irix </td></tr>
<tr>
<td>OSF1/True 64/Digital UNIX </td><td>lib/osf </td></tr>
<tr>
<td>Solaris </td><td>lib/solaris </td></tr>
<tr>
<td>HP-UX </td><td>lib/hpux </td></tr>
<tr>
<td>IBM AIX </td><td>lib/aix </td></tr>
</table>
<p>Your directory structure looks now like: </p>
<div class="fragment"><pre class="fragment">        myprj
        |
        +-- fieldtalk
           |
           +-- doc
           +-- src
           +-- include
           +-- samples
           +-+ lib
             |
             +-- {platform}    (exact name depends on platform)
</pre></div><p>6. The library is ready to be used. </p>
</div>
<hr size="1"><address style="text-align: right;">
<small>
FieldTalk Modbus Master C++ Library
<br>
Draft Version
</small></address>
</body>
</html>

